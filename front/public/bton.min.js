var bton=function(t){"use strict";const C=new TextEncoder,D=[{name:"base58",charset:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"},{name:"base64",charset:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"},{name:"base64url",charset:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}];function K(t){for(const n of D)if(n.name===t)return n.charset;throw TypeError("Charset does not exist: "+t)}const r={encode:function(t,n,r=!1){"string"==typeof t&&(t=C.encode(t));var e=K(n),i=e.length,a=[];let s,o,u,c="",f=0;for(s=0;s<t.length;s++)for(f=0,o=t[s],c+=0<o||0<(c.length^s)?"":"1";f in a||0<o;)u=0<(u=a[f])?256*u+o:o,o=u/i|0,a[f]=u%i,f++;for(;0<f--;)c+=e[a[f]];return r&&0<c.length%4?c+"=".repeat(4-c.length%4):c},decode:function(t,n){var r=K(n),e=r.length,i=[],a=[];t=t.replace("=","");let s,o,u,c=0;for(s=0;s<t.length;s++){if(c=0,(o=r.indexOf(t[s]))<0)throw new Error("Character range out of bounds: "+o);for(0<o||0<(a.length^s)||a.push(0);c in i||0<o;)u=0<(u=i[c])?u*e+o:o,o=u>>8,i[c]=u%256,c++}for(;0<c--;)a.push(i[c]);return new Uint8Array(a)}},j="qpzry9x8gf2tvdw0s3jn54khce6mua7l",V=[996825010,642813549,513874426,1027748829,705979059],n={BECH32:"bech32",BECH32M:"bech32m"};function L(t){switch(t){case n.BECH32:return 1;case n.BECH32M:return 734539939;default:throw new Error("Unrecognized encoding: "+t)}}function q(n){let r=1;for(let t=0;t<n.length;++t){var e=r>>25;r=(33554431&r)<<5^n[t];for(let t=0;t<5;++t)0<(e>>t&1)&&(r^=V[t])}return r}function F(t){var n=[];let r;for(r=0;r<t.length;++r)n.push(t.charCodeAt(r)>>5);for(n.push(0),r=0;r<t.length;++r)n.push(31&t.charCodeAt(r));return n}function M(t,n,r,e=!0){var i=[];let a=0,s=0;var o=(1<<r)-1,u=(1<<n+r-1)-1;for(const e of t){if(e<0||0<e>>n)return[];for(a=(a<<n|e)&u,s+=n;s>=r;)s-=r,i.push(a>>s&o)}if(e)0<s&&i.push(a<<r-s&o);else if(s>=n||0<(a<<r-s&o))return[];return i}function Y(t,n=0){var r=t.split("1",1)[0],{hrp:t,data:e}=function(n,t){const r=0<t?"bech32m":"bech32";if(!function(t){let n,r,e=!1,i=!1;for(n=0;n<t.length;++n){if((r=t.charCodeAt(n))<33||126<r)return;97<=r&&r<=122&&(e=!0),65<=r&&r<=90&&(i=!0)}return!e||!i}(n))return{hrp:null,data:[255]};if(t=n=n.toLowerCase(),(a=t.lastIndexOf("1"))<1||a+7>t.length||90<t.length)return{hrp:null,data:[255]};var e,i=[],a=n.lastIndexOf("1"),t=n.substring(0,a);for(let t=a+1;t<n.length;++t){const r=j.indexOf(n.charAt(t));if(-1===r)return{hrp:null,data:[255]};i.push(r)}return a=i,e=r,q(F(t).concat(a))===L(e)?{hrp:t,data:i.slice(0,i.length-6)}:{hrp:null,data:[255]}}(t,n),i=M(e.slice(1),5,8,!1),a=i.length;switch(!0){case r!==t:throw new Error("Returned hrp string is invalid.");case null===i||a<2||40<a:throw new Error("Decoded string is invalid or out of spec.");case 16<e[0]:throw new Error("Returned version bit is out of range.");case 0===e[0]&&20!==a&&32!==a:throw new Error("Decoded string does not match version 0 spec.");case 0===e[0]&&0!==n:case 0!==e[0]&&1!==n:throw new Error("Decoded version bit does not match.");default:return Uint8Array.from(i)}}const Z={encode:function(t,n="bch",r=0){n=function(i,t,n){var r=t.concat(function(t,n){var r=q(F(i).concat(t).concat([0,0,0,0,0,0]))^L(n),e=[];for(let t=0;t<6;++t)e.push(r>>5*(5-t)&31);return e}(t,n));let e=i+"1";for(let t=0;t<r.length;++t)e+=j.charAt(r[t]);return e}(n,[r,...M([...t],8,5)],0<r?"bech32m":"bech32");return Y(n,r),n},decode:Y},W=new TextEncoder,G=new TextDecoder;function X(t){return W.encode(t)}function J(t){var n=[];let r,e=0;if(0<t.length%2)throw new Error("Invalid hex string length: "+t.length);for(r=0;r<t.length;r+=2)n[e]=parseInt(t.slice(r,r+2),16),e+=1;return Uint8Array.from(n)}function Q(t){if(0===t)return Uint8Array.of(0);for(var n=[];0<t;){var r=255&t;n.push(r),t=(t-r)/256}return Uint8Array.from(n)}function $(t){if(0n===t)return Uint8Array.of(0);for(var n=[];0n<t;){var r=0xffn&t;n.push(Number(r)),t=(t-r)/256n}return Uint8Array.from(n)}function tt(t){return G.decode(t)}async function nt(t){return crypto.subtle.digest("SHA-256",t).then(t=>new Uint8Array(t))}async function rt(t){return nt(await nt(t))}const et=globalThis["crypto"];let g=class extends Uint8Array{static{this.num=(t,n,r="le")=>{t=new g(Q(t),n);return"le"===r?t.reverse():t}}static{this.big=(t,n,r="le")=>{t=new g($(t),n);return"le"===r?t.reverse():t}}static async b58check(t){t=r.decode(t,"base58");return new g(await async function(t){var n=t.slice(0,-4),t=t.slice(-4);if((await rt(n)).slice(0,4).toString()!==t.toString())throw new Error("Invalid checksum!");return n}(t))}static{this.any=(t,n)=>new g(function(t){if(t instanceof ArrayBuffer)return new Uint8Array(t);if(t instanceof Uint8Array)return t;var n=typeof t;switch(n){case"bigint":return $(t);case"boolean":return Uint8Array.of(t);case"number":return Q(t);case"string":return null!==t.match(/^(02|03)*[0-9a-fA-F]{64}$/)?J(t):W.encode(t);default:throw TypeError("Unsupported format:"+n)}}(t),n)}static{this.raw=(t,n)=>new g(t,n)}static{this.str=(t,n)=>new g(X(t),n)}static{this.hex=(t,n)=>new g(J(t),n)}static{this.json=t=>new g(X(JSON.stringify(t)))}static{this.base64=t=>new g(r.decode(t,"base64"))}static{this.b64url=t=>new g(r.decode(t,"base64url"))}static{this.bech32=(t,n=0)=>new g(Z.decode(t,n))}constructor(t,n){return void 0!==n&&((n=new Uint8Array(n).fill(0)).set(new Uint8Array(t)),t=n.buffer),super(t),this}get num(){return this.toNum()}get big(){return this.toBig()}get arr(){return this.toArr()}get str(){return this.toStr()}get hex(){return this.toHex()}get raw(){return new Uint8Array(this)}get base64(){return this.toBase64()}get b64url(){return this.toB64url()}get digest(){return this.toDigest()}get id(){return this.toDigest().then(t=>new g(t).hex)}toNum(r="le"){{var e="le"===r?this.reverse():this;let t,n=0;for(t=e.length-1;0<=t;t--)n=256*n+e[t];return Number(n)}}toBig(r="le"){{var e="le"===r?this.reverse():this;let t,n=0n;for(t=e.length-1;0<=t;t--)n=256n*n+BigInt(e[t]);return BigInt(n)}}async toDigest(t="SHA-256"){return et.subtle.digest(t,this.raw).then(t=>new Uint8Array(t))}async tob58check(){return r.encode((n=await rt(t=this),await Uint8Array.of(...t,...n.slice(0,4))),"base58");var t,n}toArr(){return Array.from(this)}toStr(){return tt(this)}toHex(){{var n=this,r=[];let t;for(t=0;t<n.length;t++)r.push(n[t].toString(16).padStart(2,"0"));return r.join("")}}toJson(){return JSON.parse(tt(this))}toBytes(){return new Uint8Array(this)}toB64url(){return r.encode(this,"base64url")}toBase64(t){return r.encode(this,"base64",t)}toBech32(t,n=0){return Z.encode(this,t,n)}prepend(t){return g.of(...t,...this)}append(t){return g.of(...this,...t)}slice(t,n){return new g(new Uint8Array(this).slice(t,n))}reverse(){return new g(new Uint8Array(this).reverse())}write(t,n){this.set(t,n)}prefixSize2(t){return g.of(...g.readSize(this.length,t),...this)}prefixSize(t){var t=g.readSize(this.length,t),n=new Uint8Array(t.length+this.length);return n.set(t),n.set(this,t.length),new g(n)}static from(t){return new g(Uint8Array.from(t))}static of2(...t){return new g(Uint8Array.of(...t))}static of(...n){var r=new Uint8Array(n.length);for(let t=0;t<r.length;t++)r[t]=n[t];return new g(r)}static join(t){let n,r=0;const e=t.reduce((t,n)=>t+n.length,0),i=new Uint8Array(e);for(const e of t)for(n=0;n<e.length;r++,n++)i[r]=e[n];return new g(i,e)}static readSize(t,n){if(t<253)return g.num(t,1);if(t<65536)return g.of(253,...g.num(t,2,n));if(t<4294967296)return g.of(254,...g.num(t,4,n));if(t<0x10000000000000000)return g.of(255,...g.num(t,8,n));throw new Error("Value is too large: "+t)}static random(t=32){return new g(et.getRandomValues(new Uint8Array(t)))}static{this.encode=X}static{this.decode=tt}static normalize(t,n){if(t instanceof Uint8Array)return t;if("string"==typeof t)return g.hex(t,n).raw;if("number"==typeof t)return g.num(t,n).raw;if("bigint"==typeof t)return g.big(t,n).raw;throw TypeError("Unrecognized format: "+typeof t)}static serialize(t){if("string"==typeof t)return g.str(t).raw;if("object"==typeof t){if(t instanceof Uint8Array)return t;try{return g.json(t).raw}catch{throw TypeError("Object is not serializable.")}}throw TypeError("Unrecognized format: "+typeof t)}static revitalize(t){if("string"==typeof(t=t instanceof Uint8Array?tt(t):t))try{return JSON.parse(t)}catch{}return t}};class f{constructor(t){this.data=new Uint8Array(t),this.size=this.data.length}peek(t){if(t>this.size)throw new Error(`Size greater than stream: ${t} > `+this.size);return new g(this.data.slice(0,t).buffer)}read(t){t=t??this.readSize();var n=this.peek(t);return this.data=this.data.slice(t),this.size=this.data.length,n}readSize(){var t=this.read(1).toNum();switch(!0){case 0<=t&&t<253:return t;case 253===t:return this.read(2).toNum();case 254===t:return this.read(4).toNum();case 255===t:return this.read(8).toNum();default:throw new Error("Varint is out of range: "+t)}}}const it={OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_IF:99,OP_NOTIF:100,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_SIZE:130,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_1ADD:139,OP_1SUB:140,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_CHECKLOCKTIMEVERIFY:177,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185};const at=520;function y(t=[],n=!0){let r=g.num(0);return Array.isArray(t)&&(r=g.raw(st(t))),"string"==typeof t&&(r=g.hex(t)),t instanceof Uint8Array&&(r=g.raw(t)),(r=n?r.prefixSize("be"):r).raw}function st(t){var n=[];for(const r of t)n.push(function(t){let n=new Uint8Array;if("string"==typeof t){if(t.startsWith("OP_"))return g.num(function(t){for(var[n,r]of Object.entries(it))if(n===t)return Number(r);throw new Error("OPCODE not found:"+t)}(t),1);t.startsWith("STR_")&&(n=g.str(t.slice(3))),n=g.hex(t)}if("number"==typeof t&&(n=g.num(t)),(n=t instanceof Uint8Array?t:n).length>at){const t=function(t){for(var n=[],r=new f(t);r.size>at;)n.push(r.read(at));return n.push(r.read(r.size)),n}(n);return st(t)}return g.of(...function(t){var n=g.num(76,1),r=g.num(77,1);switch(!0){case t<=75:return g.num(t);case 75<t&&t<256:return g.join([n,g.num(t,1)]);case 256<=t&&t<=at:return g.join([r,g.num(t,2,"be")]);default:throw new Error("Invalid word size:"+t.toString())}}(n.length),...n)}(r));return 0<n.length?g.join(n):new Uint8Array}function ot(t){return g.num(t,4).reverse()}function p(t){return g.hex(t,32).reverse()}function ut(t){return g.num(t,4).reverse()}function ct(t=4294967295){return("string"==typeof t?g.hex(t,4):g.num(t,4)).reverse()}function m(t){return"number"==typeof t&&(t=BigInt(t)),g.big(t,8).reverse()}function ft(t){return g.num(t,4).reverse()}function ht(t){"string"==typeof t&&(t=g.hex(t).raw);const n=new f(t),r=n.read(4).reverse().toNum(),e=function(t){var[n,r]=[...t.peek(2)];if(0!==n)return!1;if(t.read(2),1===r)return!0;throw new Error("Invalid witness flag: "+r)}(n),i=function(n){var r,e=[],i=n.readSize();for(let t=0;t<i;t++)e.push({txid:(r=n).read(32).reverse().toHex(),vout:r.read(4).reverse().toNum(),scriptSig:lt(r,!0),sequence:r.read(4).reverse().toHex()});return e}(n),a=function(n){var r,e=[],i=n.readSize();for(let t=0;t<i;t++)e.push({value:(r=n).read(8).reverse().big,scriptPubKey:lt(r,!0)});return e}(n);if(e)for(const t of i)t.witness=function(n){const r=[],e=n.readSize();for(let t=0;t<e;t++){const e=lt(n,!0);r.push(e)}return r}(n);return{version:r,input:i,output:a,locktime:n.read(4).reverse().toNum()}}function lt(t,n){n=!0===n?t.readSize():t.size;return(0<n?t.read(n):g.num(0)).toHex()}function dt(t){if(void 0===t)throw new Error("Script data is undefined!");if(Array.isArray(t))throw new Error("Script data is an array!");return g.normalize(t)}const wt=globalThis["crypto"],h=BigInt(0),v=BigInt(1),l=BigInt(2),gt=BigInt(3),yt=BigInt(8),d=Object.freeze({a:h,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:v,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),pt=(t,n)=>(t+n/l)/n,mt={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){var n=d["n"],r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),e=-v*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=r,s=BigInt("0x100000000000000000000000000000000"),o=pt(a*t,n),u=pt(-e*t,n);let c=S(t-o*r-u*i,n),f=S(-o*e-u*a,n);r=c>s,i=f>s;if(r&&(c=n-c),i&&(f=n-f),c>s||f>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:r,k1:c,k2neg:i,k2:f}}},a=32,o=32,vt=a+1,bt=2*a+1;function At(t){var{a:n,b:r}=d,e=S(t*t),e=S(e*t);return S(e+n*t+r)}const xt=d.a===h;class Et extends Error{constructor(t){super(t)}}function St(t){if(!(t instanceof b))throw new TypeError("JacobianPoint expected")}class b{constructor(t,n,r){this.x=t,this.y=n,this.z=r}static get BASE(){return new b(d.Gx,d.Gy,v)}static get ZERO(){return new b(h,v,h)}static fromAffine(t){if(t instanceof A)return t.equals(A.ZERO)?b.ZERO:new b(t.x,t.y,v);throw new TypeError("JacobianPoint#fromAffine: expected Point")}static toAffineBatch(t){const r=function(t,e=d.P){const i=new Array(t.length),n=O(t.reduce((t,n,r)=>n===h?t:S((i[r]=t)*n,e),v),e);return t.reduceRight((t,n,r)=>n===h?t:(i[r]=S(t*i[r],e),S(t*n,e)),n),i}(t.map(t=>t.z));return t.map((t,n)=>t.toAffine(r[n]))}static normalizeZ(t){return b.toAffineBatch(t).map(b.fromAffine)}equals(t){St(t);var{x:n,y:r,z:e}=this,{x:t,y:i,z:a}=t,s=S(e*e),o=S(a*a),n=S(n*o),t=S(t*s),r=S(S(r*a)*o),a=S(S(i*e)*s);return n===t&&r===a}negate(){return new b(this.x,S(-this.y),this.z)}double(){var{x:t,y:n,z:r}=this,e=S(t*t),i=S(n*n),a=S(i*i),t=t+i,i=S(l*(S(t*t)-e-a)),t=S(gt*e),e=S(t*t),e=S(e-l*i),t=S(t*(i-e)-yt*a),i=S(l*n*r);return new b(e,t,i)}add(t){St(t);var n,{x:r,y:e,z:i}=this,{x:a,y:s,z:o}=t;return a===h||s===h?this:r===h||e===h?t:(t=S(i*i),n=S(o*o),r=S(r*n),a=S(a*t),e=S(S(e*o)*n),n=S(S(s*i)*t),s=S(a-r),t=S(n-e),s===h?t===h?this.double():b.ZERO:(a=S(s*s),n=S(s*a),r=S(r*a),a=S(t*t-n-l*r),t=S(t*(r-a)-e*n),r=S(i*o*s),new b(a,t,r)))}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){var r=b.ZERO;if("bigint"==typeof t&&t===h)return r;let e=Nt(t);if(e===v)return this;if(!xt){let t=r,n=this;for(;e>h;)e&v&&(t=t.add(n)),n=n.double(),e>>=v;return t}let{k1neg:n,k1:i,k2neg:a,k2:s}=mt.splitScalar(e),o=r,u=r,c=this;for(;i>h||s>h;)i&v&&(o=o.add(c)),s&v&&(u=u.add(c)),c=c.double(),i>>=v,s>>=v;return n&&(o=o.negate()),a&&(u=u.negate()),u=new b(S(u.x*mt.beta),u.y,u.z),o.add(u)}precomputeWindow(n){var r=xt?128/n+1:256/n+1,e=[];let i=this,a=i;for(let t=0;t<r;t++){a=i,e.push(a);for(let t=1;t<2**(n-1);t++)a=a.add(i),e.push(a);i=a.double()}return e}wNAF(r,t){const e=(t=!t&&this.equals(b.BASE)?A.BASE:t)&&t._WINDOW_SIZE||1;if(256%e)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=t&&Ot.get(t),a=(i||(i=this.precomputeWindow(e),t&&1!==e&&(i=b.normalizeZ(i),Ot.set(t,i))),b.ZERO),s=b.BASE;var o=1+(xt?128/e:256/e),u=2**(e-1),c=BigInt(2**e-1),f=2**e,h=BigInt(e);for(let n=0;n<o;n++){const e=n*u;let t=Number(r&c);r>>=h,t>u&&(t-=f,r+=v);var l=e,d=e+Math.abs(t)-1,w=n%2!=0,g=t<0;0===t?s=s.add(Pt(w,i[l])):a=a.add(Pt(g,i[d]))}return{p:a,f:s}}multiply(t,n){let r,e,i=Nt(t);if(xt){const{k1neg:t,k1:c,k2neg:f,k2:h}=mt.splitScalar(i);var{p:a,f:s}=this.wNAF(c,n),{p:o,f:u}=this.wNAF(h,n),a=Pt(t,a),o=Pt(f,o);o=new b(S(o.x*mt.beta),o.y,o.z),r=a.add(o),e=s.add(u)}else{const{p:t,f:l}=this.wNAF(i,n);r=t,e=l}return b.normalizeZ([r,e])[0]}toAffine(t){var{x:n,y:r,z:e}=this,i=this.equals(b.ZERO),t=t=null==t?i?yt:O(e):t,a=S(t*t),s=S(a*t),n=S(n*a),a=S(r*s),r=S(e*t);if(i)return A.ZERO;if(r!==v)throw new Error("invZ was invalid");return new A(n,a)}}function Pt(t,n){var r=n.negate();return t?r:n}const Ot=new WeakMap;let A=class{constructor(t,n){this.x=t,this.y=n}_setWindowSize(t){this._WINDOW_SIZE=t,Ot.delete(this)}static get BASE(){return new A(d.Gx,d.Gy)}static get ZERO(){return new A(h,h)}hasEvenY(){return this.y%l===h}static fromCompressedHex(t){var n=32===t.length,r=x(n?t:t.subarray(1));if(!Ct(r))throw new Error("Point is not on curve");let e=function(t){var n=d["P"],r=BigInt(6),e=BigInt(11),i=BigInt(22),a=BigInt(23),s=BigInt(44),o=BigInt(88),u=t*t*t%n,c=u*u*t%n,f=P(c,gt)*c%n,f=P(f,gt)*c%n,f=P(f,l)*u%n,e=P(f,e)*f%n,f=P(e,i)*e%n,i=P(f,s)*f%n,o=P(i,o)*i%n,i=P(o,s)*f%n,o=P(i,gt)*c%n,s=P(o,a)*e%n,f=P(s,r)*u%n,i=P(f,l);if(i*i%n!==t)throw new Error("Cannot find square root");return i}(At(r));var i=(e&v)===v,n=(n?i&&(e=S(-e)):1==(1&t[0])!=i&&(e=S(-e)),new A(r,e));return n.assertValidity(),n}static fromUncompressedHex(t){var n=x(t.subarray(1,a+1)),t=x(t.subarray(a+1,2*a+1)),n=new A(n,t);return n.assertValidity(),n}static fromHex(t){var t=E(t),n=t.length,r=t[0];if(n===a)return this.fromCompressedHex(t);if(n===vt&&(2===r||3===r))return this.fromCompressedHex(t);if(n===bt&&4===r)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-${vt} compressed bytes or ${bt} uncompressed bytes, not `+n)}static fromPrivateKey(t){return A.BASE.multiply(B(t))}static fromSignature(t,n,r){var{r:n,s:e}=jt(n);if(![0,1,2,3].includes(r))throw new Error("Cannot recover: invalid recovery bit");var t=Tt(E(t)),i=d["n"],n=2===r||3===r?n+i:n,a=O(n,i),t=S(-t*a,i),e=S(e*a,i),a=1&r?"03":"02",i=A.fromHex(a+c(n)),r=A.BASE.multiplyAndAddUnsafe(i,t,e);if(r)return r.assertValidity(),r;throw new Error("Cannot recover signature: point at infinify")}toRawBytes(t=!1){return i(this.toHex(t))}toHex(t=!1){var n=c(this.x);return t?(this.hasEvenY()?"02":"03")+n:"04"+n+c(this.y)}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){var t="Point is not on elliptic curve",{x:n,y:r}=this;if(!Ct(n)||!Ct(r))throw new Error(t);r=S(r*r);if(S(r-At(n))!==h)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new A(this.x,S(-this.y))}double(){return b.fromAffine(this).double().toAffine()}add(t){return b.fromAffine(this).add(b.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return b.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,n,r){var e=b.fromAffine(this),e=n===h||n===v||this!==A.BASE?e.multiplyUnsafe(n):e.multiply(n),n=b.fromAffine(t).multiplyUnsafe(r),t=e.add(n);return t.equals(b.ZERO)?void 0:t.toAffine()}};function Ut(t){return 8<=Number.parseInt(t[0],16)?"00"+t:t}function _t(t){if(t.length<2||2!==t[0])throw new Error("Invalid signature integer tag: "+e(t));var n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:x(r),left:t.subarray(n+2)}}class u{constructor(t,n){this.r=t,this.s=n,this.assertValidity()}static fromCompact(t){var n=t instanceof Uint8Array,r="Signature.fromCompact";if("string"!=typeof t&&!n)throw new TypeError(r+": Expected string or Uint8Array");n=n?e(t):t;if(128!==n.length)throw new Error(r+": Expected 64-byte hex");return new u(Ht(n.slice(0,64)),Ht(n.slice(64,128)))}static fromDER(t){var n=t instanceof Uint8Array;if("string"==typeof t||n)return{r:n,s:t}=function(t){if(t.length<2||48!=t[0])throw new Error("Invalid signature tag: "+e(t));if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");var{data:t,left:n}=_t(t.subarray(2)),{data:n,left:r}=_t(n);if(r.length)throw new Error("Invalid signature: left bytes after parsing: "+e(r));return{r:t,s:n}}(n?t:i(t)),new u(n,t);throw new TypeError("Signature.fromDER: Expected string or Uint8Array")}static fromHex(t){return this.fromDER(t)}assertValidity(){var{r:t,s:n}=this;if(!_(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!_(n))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){var t=d.n>>v;return this.s>t}normalizeS(){return this.hasHighS()?new u(this.r,S(-this.s,d.n)):this}toDERRawBytes(){return i(this.toDERHex())}toDERHex(){var t=Ut(zt(this.s)),n=Ut(zt(this.r)),r=t.length/2,e=n.length/2,i=zt(r),a=zt(e);return`30${zt(e+r+4)}02${a}${n}02`+i+t}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return i(this.toCompactHex())}toCompactHex(){return c(this.r)+c(this.s)}}function s(...r){if(!r.every(t=>t instanceof Uint8Array))throw new Error("Uint8Array list expected");if(1===r.length)return r[0];var t=r.reduce((t,n)=>t+n.length,0),e=new Uint8Array(t);for(let t=0,n=0;t<r.length;t++){var i=r[t];e.set(i,n),n+=i.length}return e}const Bt=Array.from({length:256},(t,n)=>n.toString(16).padStart(2,"0"));function e(n){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");let r="";for(let t=0;t<n.length;t++)r+=Bt[n[t]];return r}const It=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function c(t){if("bigint"!=typeof t)throw new Error("Expected bigint");if(h<=t&&t<It)return t.toString(16).padStart(64,"0");throw new Error("Expected number 0 <= n < 2^256")}function w(t){t=i(c(t));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function zt(t){t=t.toString(16);return 1&t.length?"0"+t:t}function Ht(t){if("string"!=typeof t)throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt("0x"+t)}function i(n){if("string"!=typeof n)throw new TypeError("hexToBytes: expected string, got "+typeof n);if(n.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+n.length);var r=new Uint8Array(n.length/2);for(let t=0;t<r.length;t++){var e=2*t,e=n.slice(e,2+e),e=Number.parseInt(e,16);if(Number.isNaN(e)||e<0)throw new Error("Invalid byte sequence");r[t]=e}return r}function x(t){return Ht(e(t))}function E(t){return t instanceof Uint8Array?Uint8Array.from(t):i(t)}function Nt(t){if("number"==typeof t&&Number.isSafeInteger(t)&&0<t)return BigInt(t);if("bigint"==typeof t&&_(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function S(t,n=d.P){t%=n;return t>=h?t:n+t}function P(t,n){var r=d["P"];let e=t;for(;n-- >h;)e=e*e%r;return e}function O(t,n=d.P){if(t===h||n<=h)throw new Error(`invert: expected positive integers, got n=${t} mod=`+n);let r=S(t,n),e=n,i=h,a=v;for(;r!==h;){const t=e%r,n=i-a*(e/r);e=r,r=t,i=a,a=n}if(e!==v)throw new Error("invert: does not exist");return S(i,n)}function Tt(t,n=!1){r=8*(t=t).length-8*o,t=x(t);var r=0<r?t>>BigInt(r):t;return!n&&(t=d.n,t<=r)?r-t:r}let U,Rt;class kt{constructor(t,n){if(this.hashLen=t,this.qByteLen=n,"number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof n||n<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}hmac(...t){return z.hmacSha256(this.k,...t)}hmacSync(...t){return Rt(this.k,...t)}checkSync(){if("function"!=typeof Rt)throw new Et("hmacSha256Sync needs to be set")}incr(){if(1e3<=this.counter)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),0!==t.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),0!==t.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){this.incr();let t=0;for(var n=[];t<this.qByteLen;){this.v=await this.hmac(this.v);var r=this.v.slice();n.push(r),t+=this.v.length}return s(...n)}generateSync(){this.checkSync(),this.incr();let t=0;for(var n=[];t<this.qByteLen;){this.v=this.hmacSync(this.v);var r=this.v.slice();n.push(r),t+=this.v.length}return s(...n)}}function _(t){return h<t&&t<d.n}function Ct(t){return h<t&&t<d.P}function Dt(r,t,n,e=!0){var i=d["n"],r=Tt(r,!0);if(_(r)){var a=O(r,i),r=A.BASE.multiply(r),s=S(r.x,i);if(s!==h){a=S(a*S(t+n*s,i),i);if(a!==h){let t=new u(s,a),n=(r.x===t.r?0:2)|Number(r.y&v);return e&&t.hasHighS()&&(t=t.normalizeS(),n^=1),{sig:t,recovery:n}}}}}function B(t){let n;if("bigint"==typeof t)n=t;else if("number"==typeof t&&Number.isSafeInteger(t)&&0<t)n=BigInt(t);else if("string"==typeof t){if(t.length!==2*o)throw new Error("Expected 32 bytes of private key");n=Ht(t)}else{if(!(t instanceof Uint8Array))throw new TypeError("Expected valid private key");if(t.length!==o)throw new Error("Expected 32 bytes of private key");n=x(t)}if(_(n))return n;throw new Error("Expected private key: 0 < key < n")}function Kt(t){return t instanceof A?(t.assertValidity(),t):A.fromHex(t)}function jt(n){if(n instanceof u)return n.assertValidity(),n;try{return u.fromDER(n)}catch(t){return u.fromCompact(n)}}function Vt(t){var n=t instanceof Uint8Array,r="string"==typeof t,e=(n||r)&&t.length;return n?e===vt||e===bt:r?e===2*vt||e===2*bt:t instanceof A}function Lt(t,n,r=!1){if(Vt(t))throw new TypeError("getSharedSecret: first arg must be private key");if(Vt(n))return(n=Kt(n)).assertValidity(),n.multiply(B(t)).toRawBytes(r);throw new TypeError("getSharedSecret: second arg must be public key")}function qt(t){return x(t.length>a?t.slice(0,a):t)}function Ft(t){return w(t)}function Mt(t,n,r){if(null==t)throw new Error(`sign: expected valid message hash, not "${t}"`);var e,t=E(t),n=B(n),i=[Ft(n),Ft((e=S(i=qt(i=t),d.n))<h?i:e)];if(null!=r){const t=E(r=!0===r?z.randomBytes(a):r);if(t.length!==a)throw new Error(`sign: Expected ${a} bytes of extra data`);i.push(t)}return{seed:s(...i),m:qt(t),d:n}}function Yt(t,n){var{sig:t,recovery:r}=t,{der:n,recovered:e}=Object.assign({canonical:!0,der:!0},n),n=n?t.toDERRawBytes():t.toCompactRawBytes();return e?[n,r]:n}const Zt={strict:!0};function Wt(t){return S(x(t),d.n)}class Gt{constructor(t,n){this.r=t,this.s=n,this.assertValidity()}static fromHex(t){t=E(t);if(64!==t.length)throw new TypeError("SchnorrSignature.fromHex: expected 64 bytes, not "+t.length);var n=x(t.subarray(0,32)),t=x(t.subarray(32,64));return new Gt(n,t)}assertValidity(){var{r:t,s:n}=this;if(!Ct(t)||!_(n))throw new Error("Invalid signature")}toHex(){return c(this.r)+c(this.s)}toRawBytes(){return i(this.toHex())}}class Xt{constructor(t,n,r=z.randomBytes()){if(null==t)throw new TypeError(`sign: Expected valid message, not "${t}"`);this.m=E(t);var{x:t,scalar:n}=this.getScalar(B(n));if(this.px=t,this.d=n,this.rand=E(r),32!==this.rand.length)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(t){var n=A.fromPrivateKey(t),t=n.hasEvenY()?t:d.n-t;return{point:n,scalar:t,x:n.toRawX()}}initNonce(t,n){return w(t^x(n))}finalizeNonce(t){t=S(x(t),d.n);if(t===h)throw new Error("sign: Creation of signature failed. k is zero");var{point:t,x:n,scalar:r}=this.getScalar(t);return{R:t,rx:n,k:r}}finalizeSig(t,n,r,e){return new Gt(t.x,S(n+r*e,d.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){var{m:t,d:n,px:r,rand:e}=this,i=z.taggedHash,e=this.initNonce(n,await i(I.aux,e)),{R:e,rx:a,k:s}=this.finalizeNonce(await i(I.nonce,e,r,t)),i=Wt(await i(I.challenge,a,r,t)),a=this.finalizeSig(e,s,i,n);return await $t(a,t,r)||this.error(),a}calcSync(){var{m:t,d:n,px:r,rand:e}=this,i=z.taggedHashSync,e=this.initNonce(n,i(I.aux,e)),{R:e,rx:a,k:s}=this.finalizeNonce(i(I.nonce,e,r,t)),i=Wt(i(I.challenge,a,r,t)),a=this.finalizeSig(e,s,i,n);return tn(a,t,r)||this.error(),a}}function Jt(t,n,r){var e=t instanceof Gt,t=e?t:Gt.fromHex(t);return e&&t.assertValidity(),{...t,m:E(n),P:Kt(r)}}function Qt(t,n,r,e){n=A.BASE.multiplyAndAddUnsafe(n,B(r),S(-e,d.n));return!(!n||!n.hasEvenY()||n.x!==t)}async function $t(t,n,r){try{var{r:e,s:i,m:a,P:s}=Jt(t,n,r),o=Wt(await z.taggedHash(I.challenge,w(e),s.toRawX(),a));return Qt(e,s,i,o)}catch(t){return!1}}function tn(t,n,r){try{var{r:e,s:i,m:a,P:s}=Jt(t,n,r),o=Wt(z.taggedHashSync(I.challenge,w(e),s.toRawX(),a));return Qt(e,s,i,o)}catch(t){if(t instanceof Et)throw t;return!1}}var nn={Signature:Gt,getPublicKey:function(t){return A.fromPrivateKey(t).toRawX()},sign:async function(t,n,r){return new Xt(t,n,r).calc()},verify:$t,signSync:function(t,n,r){return new Xt(t,n,r).calcSync()},verifySync:tn};A.BASE._setWindowSize(8);const I={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},rn={},z={bytesToHex:e,hexToBytes:i,concatBytes:s,mod:S,invert:O,isValidPrivateKey(t){try{return B(t),!0}catch(t){return!1}},_bigintTo32Bytes:w,_normalizePrivateKey:B,hashToPrivateKey:t=>{t=E(t);var n=o+8;if(t.length<n||1024<t.length)throw new Error("Expected valid bytes of private key as per FIPS 186");return w(S(x(t),d.n-v)+v)},randomBytes:(t=32)=>wt.getRandomValues(new Uint8Array(t)),randomPrivateKey:()=>z.hashToPrivateKey(z.randomBytes(o+8)),precompute(t=8,n=A.BASE){n=n===A.BASE?n:new A(n.x,n.y);return n._setWindowSize(t),n.multiply(gt),n},sha256:async(...t)=>{t=await wt.subtle.digest("SHA-256",s(...t));return new Uint8Array(t)},hmacSha256:async(t,...n)=>{t=await wt.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=s(...n),t=await wt.subtle.sign("HMAC",t,n);return new Uint8Array(t)},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...n)=>{let r=rn[t];if(void 0===r){const n=await z.sha256(Uint8Array.from(t,t=>t.charCodeAt(0)));r=s(n,n),rn[t]=r}return z.sha256(r,...n)},taggedHashSync:(t,...n)=>{if("function"!=typeof U)throw new Et("sha256Sync is undefined, you need to set it");let r=rn[t];if(void 0===r){const n=U(Uint8Array.from(t,t=>t.charCodeAt(0)));r=s(n,n),rn[t]=r}return U(r,...n)},_JacobianPoint:b};Object.defineProperties(z,{sha256Sync:{configurable:!1,get:()=>U,set(t){U=U||t}},hmacSha256Sync:{configurable:!1,get:()=>Rt,set(t){Rt=Rt||t}}});var en=Object.freeze({__proto__:null,CURVE:d,Point:A,Signature:u,getPublicKey:function(t,n=!1){return A.fromPrivateKey(t).toRawBytes(n)},getSharedSecret:Lt,recoverPublicKey:function(t,n,r,e=!1){return A.fromSignature(t,n,r).toRawBytes(e)},schnorr:nn,sign:async function(t,n,r={}){var{seed:t,m:e,d:i}=Mt(t,n,r.extraEntropy),a=new kt(32,o);let s;for(await a.reseed(t);!(s=Dt(await a.generate(),e,i,r.canonical));)await a.reseed();return Yt(s,r)},signSync:function(t,n,r={}){var{seed:t,m:e,d:i}=Mt(t,n,r.extraEntropy),a=new kt(32,o);let s;for(a.reseedSync(t);!(s=Dt(a.generateSync(),e,i,r.canonical));)a.reseedSync();return Yt(s,r)},utils:z,verify:function(t,n,r,e=Zt){let i;try{i=jt(t),n=E(n)}catch(t){return!1}var{r:a,s}=i;if(e.strict&&i.hasHighS())return!1;e=Tt(n);let o;try{o=Kt(r)}catch(t){return!1}n=d.n,r=O(s,n),s=S(e*r,n),e=S(a*r,n),r=A.BASE.multiplyAndAddUnsafe(o,s,e);return!!r&&S(r.x,n)===a}});const an=new TextEncoder,sn=[{name:"base58",charset:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"},{name:"base64",charset:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"},{name:"base64url",charset:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}];function on(t){for(const n of sn)if(n.name===t)return n.charset;throw TypeError("Charset does not exist: "+t)}const H={encode:function(t,n,r=!1){"string"==typeof t&&(t=an.encode(t));var e=on(n),i=e.length,a=[];let s,o,u,c="",f=0;for(s=0;s<t.length;s++)for(f=0,o=t[s],c+=0<o||0<(c.length^s)?"":"1";f in a||0<o;)u=0<(u=a[f])?256*u+o:o,o=u/i|0,a[f]=u%i,f++;for(;0<f--;)c+=e[a[f]];return r&&0<c.length%4?c+"=".repeat(4-c.length%4):c},decode:function(t,n){var r=on(n),e=r.length,i=[],a=[];t=t.replace("=","");let s,o,u,c=0;for(s=0;s<t.length;s++){if(c=0,(o=r.indexOf(t[s]))<0)throw new Error("Character range out of bounds: "+o);for(0<o||0<(a.length^s)||a.push(0);c in i||0<o;)u=0<(u=i[c])?u*e+o:o,o=u>>8,i[c]=u%256,c++}for(;0<c--;)a.push(i[c]);return new Uint8Array(a)}},un="qpzry9x8gf2tvdw0s3jn54khce6mua7l",cn=[996825010,642813549,513874426,1027748829,705979059],fn={BECH32:"bech32",BECH32M:"bech32m"};function hn(t){switch(t){case fn.BECH32:return 1;case fn.BECH32M:return 734539939;default:throw new Error("Unrecognized encoding: "+t)}}function ln(n){let r=1;for(let t=0;t<n.length;++t){var e=r>>25;r=(33554431&r)<<5^n[t];for(let t=0;t<5;++t)0<(e>>t&1)&&(r^=cn[t])}return r}function dn(t){var n=[];let r;for(r=0;r<t.length;++r)n.push(t.charCodeAt(r)>>5);for(n.push(0),r=0;r<t.length;++r)n.push(31&t.charCodeAt(r));return n}function wn(t,n,r,e=!0){var i=[];let a=0,s=0;var o=(1<<r)-1,u=(1<<n+r-1)-1;for(const e of t){if(e<0||0<e>>n)return[];for(a=(a<<n|e)&u,s+=n;s>=r;)s-=r,i.push(a>>s&o)}if(e)0<s&&i.push(a<<r-s&o);else if(s>=n||0<(a<<r-s&o))return[];return i}function gn(t,n=0){var r=t.split("1",1)[0],{hrp:t,data:e}=function(n,t){const r=0<t?"bech32m":"bech32";if(!function(t){let n,r,e=!1,i=!1;for(n=0;n<t.length;++n){if((r=t.charCodeAt(n))<33||126<r)return;97<=r&&r<=122&&(e=!0),65<=r&&r<=90&&(i=!0)}return!e||!i}(n))return{hrp:null,data:[255]};if(t=n=n.toLowerCase(),(a=t.lastIndexOf("1"))<1||a+7>t.length||90<t.length)return{hrp:null,data:[255]};var e,i=[],a=n.lastIndexOf("1"),t=n.substring(0,a);for(let t=a+1;t<n.length;++t){const r=un.indexOf(n.charAt(t));if(-1===r)return{hrp:null,data:[255]};i.push(r)}return a=i,e=r,ln(dn(t).concat(a))===hn(e)?{hrp:t,data:i.slice(0,i.length-6)}:{hrp:null,data:[255]}}(t,n),i=wn(e.slice(1),5,8,!1),a=i.length;switch(!0){case r!==t:throw new Error("Returned hrp string is invalid.");case null===i||a<2||40<a:throw new Error("Decoded string is invalid or out of spec.");case 16<e[0]:throw new Error("Returned version bit is out of range.");case 0===e[0]&&20!==a&&32!==a:throw new Error("Decoded string does not match version 0 spec.");case 0===e[0]&&0!==n:case 0!==e[0]&&1!==n:throw new Error("Decoded version bit does not match.");default:return Uint8Array.from(i)}}const yn={encode:function(t,n="bch",r=0){n=function(i,t,n){var r=t.concat(function(t,n){var r=ln(dn(i).concat(t).concat([0,0,0,0,0,0]))^hn(n),e=[];for(let t=0;t<6;++t)e.push(r>>5*(5-t)&31);return e}(t,n));let e=i+"1";for(let t=0;t<r.length;++t)e+=un.charAt(r[t]);return e}(n,[r,...wn([...t],8,5)],0<r?"bech32m":"bech32");return gn(n,r),n},decode:gn},pn=new TextEncoder,mn=new TextDecoder;function vn(t){return pn.encode(t)}function bn(t){var n=[];let r,e=0;if(0<t.length%2)throw new Error("Invalid hex string length: "+t.length);for(r=0;r<t.length;r+=2)n[e]=parseInt(t.slice(r,r+2),16),e+=1;return Uint8Array.from(n)}function An(t){for(var n=[];0<t;){var r=255&t;n.push(r),t=(t-r)/256}return Uint8Array.from(n)}function xn(t){for(var n=[];0n<t;){var r=0xffn&t;n.push(Number(r)),t=(t-r)/256n}return Uint8Array.from(n)}function En(t){return mn.decode(t)}async function Sn(t){return crypto.subtle.digest("SHA-256",t).then(t=>new Uint8Array(t))}async function Pn(t){return Sn(await Sn(t))}const On=globalThis["crypto"];class N extends Uint8Array{static{this.num=(t,n,r="le")=>new N(An(t),n,r)}static{this.big=(t,n,r="le")=>new N(xn(t),n,r)}static async b58check(t){t=H.decode(t,"base58");return new N(await async function(t){var n=t.slice(0,-4),t=t.slice(-4);if((await Pn(n)).slice(0,4).toString()!==t.toString())throw new Error("Invalid checksum!");return n}(t))}static{this.buff=(t,n)=>new N(function(t){if(t instanceof ArrayBuffer)return new Uint8Array(t);if(t instanceof Uint8Array)return t;var n=typeof t;switch(n){case"bigint":return xn(t);case"boolean":return Uint8Array.of(t);case"number":return An(t);case"string":return null!==t.match(/^(02|03)*[0-9a-fA-F]{64}$/)?bn(t):pn.encode(t);default:throw TypeError("Unsupported format:"+n)}}(t),n)}static{this.raw=(t,n)=>new N(t,n)}static{this.str=(t,n)=>new N(vn(t),n)}static{this.hex=(t,n)=>new N(bn(t),n)}static{this.json=t=>new N(vn(JSON.stringify(t)))}static{this.base64=t=>new N(H.decode(t,"base64"))}static{this.b64url=t=>new N(H.decode(t,"base64url"))}static{this.bech32=(t,n)=>new N(yn.decode(t,n))}constructor(t,n=null,r="be"){if(null!==n){const r=new Uint8Array(n).fill(0);r.set(new Uint8Array(t)),t=r.buffer}return super(t="le"===r?new Uint8Array(t).reverse():t),this}get num(){return this.toNum()}get big(){return this.toBig()}get arr(){return this.toArr()}get str(){return this.toStr()}get hex(){return this.toHex()}get raw(){return new Uint8Array(this)}get hash(){return this.toHash()}get id(){return this.toHash().then(t=>new N(t).hex)}toNum(r="le"){{var e="le"===r?this.reverse():this;let t,n=0;for(t=e.length-1;0<=t;t--)n=256*n+e[t];return Number(n)}}toBig(r="le"){{var e="le"===r?this.reverse():this;let t,n=0n;for(t=e.length-1;0<=t;t--)n=256n*n+BigInt(e[t]);return BigInt(n)}}async toHash(){return On.subtle.digest("SHA-256",this.raw).then(t=>new Uint8Array(t))}async tob58check(){return H.encode((n=await Pn(t=this),await Uint8Array.of(...t,...n.slice(0,4))),"base58");var t,n}toArr(){return Array.from(this)}toStr(){return En(this)}toHex(){{var n=this,r=[];let t;for(t=0;t<n.length;t++)r.push(n[t].toString(16).padStart(2,"0"));return r.join("")}}toJson(){return JSON.parse(En(this))}toBytes(){return new Uint8Array(this)}toB64url(){return H.encode(this,"base64url")}toBase64(t){return H.encode(this,"base64",t)}toBech32(t,n){return yn.encode(this,t,n)}prepend(t){return N.of(...t,...this)}append(t){return N.of(...this,...t)}slice(t,n){return new N(new Uint8Array(this).slice(t,n))}reverse(){return new N(new Uint8Array(this).reverse())}write(t,n){this.set(t,n)}prependVarint(t=this.length){return N.of(...N.readVarint(t),...this)}static from(t){return new N(Uint8Array.from(t))}static of(...t){return new N(Uint8Array.of(...t))}static join(t){let n,r=0;const e=t.reduce((t,n)=>t+n.length,0),i=new Uint8Array(e);for(const e of t)for(n=0;n<e.length;r++,n++)i[r]=e[n];return new N(i,e)}static readVarint(t){if(t<253)return N.num(t,1);if(t<65536)return N.of(253,...N.num(t,2));if(t<4294967296)return N.of(254,...N.num(t,4));if(t<0x10000000000000000)return N.of(255,...N.num(t,8));throw new Error("Value is too large: "+t)}static random(t=32){return new N(On.getRandomValues(new Uint8Array(t)))}static{this.encode=vn}static{this.decode=En}static normalize(t,n){if(t instanceof Uint8Array)return t;if("string"==typeof t)return N.hex(t,n).toBytes();if("number"==typeof t)return N.num(t,n).toBytes();if("bigint"==typeof t)return N.big(t,n).toBytes();throw TypeError("Unrecognized format: "+typeof t)}static serialize(t){if("string"==typeof t)return N.str(t).toBytes();if("object"==typeof t){if(t instanceof Uint8Array)return t;try{return N.json(t).toBytes()}catch{throw TypeError("Object is not serializable.")}}throw TypeError("Unrecognized format: "+typeof t)}static revitalize(t){if("string"==typeof(t=t instanceof Uint8Array?En(t):t))try{return JSON.parse(t)}catch{}return t}}const Un=globalThis.crypto;async function _n(t,n){return Lt(N.normalize(t),N.normalize(n),!0)}async function Bn(t){return Un.subtle.importKey("raw",N.normalize(t),{name:"AES-CBC"},!0,["encrypt","decrypt"])}const In={ecdh:_n,import:Bn,export:async function(t){return Un.subtle.exportKey("raw",t).then(t=>new Uint8Array(t))},hmac:async function(t,n="SHA-256"){n={name:"HMAC",hash:n};return Un.subtle.importKey("raw",N.normalize(t),n,!1,["sign","verify"])},shared:async function(t,n){return Bn((await _n(t,n)).slice(1,33))},generate:async function(){return Bn(N.random(32))},normalize:async function(t){return t instanceof CryptoKey?t:In.import(t)}};class T extends Uint8Array{static{this.N=d.n}static mod(t,n=T.N){return z.mod(t,n)}static{this.isField=t=>t instanceof T}static normalize(t){return t=zn(t),t=T.mod(t),t=z._normalizePrivateKey(t),N.big(t,32).raw}static validate(t){return z.isValidPrivateKey(t)}constructor(t){super(t=T.normalize(t))}get buff(){return new N(this)}get raw(){return this}get num(){return this.buff.toBig()}get point(){return R.fromNum(this.num)}get hasOddY(){return this.point.hasOddY}get negated(){return this.hasOddY?this.negate():this}gt(t){return new T(t).num>this.num}lt(t){return new T(t).num<this.num}eq(t){return new T(t).num===this.num}ne(t){return new T(t).num!==this.num}add(t){t=new T(t);return new T(this.num+t.num)}sub(t){t=new T(t);return new T(this.num-t.num)}mul(t){t=new T(t);return new T(this.num*t.num)}pow(t,n=T.N-1n){t=new T(t),t=T.mod(t.num,n);return new T(this.num**t)}div(t){t=new T(t),t=this.pow(t.num,T.N-2n);return new T(this.num*t.num)}negate(){return new T(T.N-this.num)}}class R{static{this.N=d.n}static validate(t){try{t=zn(t);var n=N.big(t).toHex();return A.fromHex(n).assertValidity(),!0}catch{return!1}}static fromNum(t){t=zn(t);t=z.mod(t,R.N),t=A.BASE.multiply(t);return new R(t.x,t.y)}static fromX(t){t=zn(t);t=N.big(t).toHex();return R.from(A.fromHex(t))}static from(t){return new R(t.x,t.y)}constructor(t,n){this.__p=new A(t,n),this.__x=this.__p.x,this.__y=this.__p.y,this.__p.assertValidity()}get p(){return this.__p}get buff(){return new N(this.rawX.slice(1))}get hex(){return this.buff.hex}get hasOddY(){return!this.__p.hasEvenY()}get rawX(){var t=this.__p.hasEvenY()?2:3,n=N.big(this.__x);return Uint8Array.of(t,...n)}get rawY(){return N.big(this.__y)}get x(){return this.__x}get y(){return this.__y}eq(t){return t instanceof R?this.p.equals(new A(t.x,t.y)):t instanceof Uint8Array?this.x.toString()===t.toString():"number"==typeof t?BigInt(t)===this.x:t===this.x}add(t){return t instanceof R?R.from(this.p.add(t.p)):R.from(this.p.add(R.fromNum(t).p))}sub(t){return t instanceof R?R.from(this.p.subtract(t.p)):R.from(this.p.subtract(R.fromNum(t).p))}mul(t){return t instanceof R?R.from(this.p.multiply(t.x)):R.from(this.p.multiply(zn(t)))}negate(){return R.from(this.__p.negate())}}function zn(t){if(t instanceof Uint8Array)return N.raw(t).big;if("string"==typeof t)return N.hex(t).big;if("number"==typeof t)return BigInt(t);if("bigint"==typeof t)return t;throw TypeError("Invalid input type:"+typeof t)}function Hn(t,n=0){for(var r=[];0<t;){const n=0xffn&t;r.push(n),t=(t-n)/256n}let e=Uint8Array.from(r.map(t=>Number(t)));if(0!==n){const t=new Uint8Array(n);t.set(e),e=t}return e}const Nn=[0n,1n,2n,3n,4n,5n,6n,7n,8n,9n,10n,11n,12n,13n,14n,15n,7n,4n,13n,1n,10n,6n,15n,3n,12n,0n,9n,5n,2n,14n,11n,8n,3n,10n,14n,4n,9n,15n,8n,1n,2n,7n,0n,6n,13n,11n,5n,12n,1n,9n,11n,10n,0n,8n,12n,4n,13n,3n,7n,15n,14n,5n,6n,2n,4n,0n,5n,9n,7n,12n,2n,10n,14n,1n,3n,8n,11n,6n,15n,13n],Tn=[5n,14n,7n,0n,9n,2n,11n,4n,13n,6n,15n,8n,1n,10n,3n,12n,6n,11n,3n,7n,0n,13n,5n,10n,14n,15n,8n,12n,4n,9n,1n,2n,15n,5n,1n,3n,7n,14n,6n,9n,11n,8n,12n,2n,10n,0n,4n,13n,8n,6n,4n,1n,3n,11n,15n,0n,5n,12n,2n,13n,9n,7n,10n,14n,12n,15n,10n,4n,1n,5n,8n,7n,6n,2n,13n,14n,0n,3n,9n,11n],Rn=[11n,14n,15n,12n,5n,8n,7n,9n,11n,13n,14n,15n,6n,7n,9n,8n,7n,6n,8n,13n,11n,9n,7n,15n,7n,12n,15n,9n,11n,7n,13n,12n,11n,13n,6n,7n,14n,9n,13n,15n,14n,8n,13n,6n,5n,12n,7n,5n,11n,12n,14n,15n,14n,15n,9n,8n,9n,14n,5n,6n,8n,6n,5n,12n,9n,15n,5n,11n,6n,8n,13n,12n,5n,12n,13n,14n,11n,8n,5n,6n],kn=[8n,9n,9n,11n,13n,15n,15n,5n,7n,7n,8n,11n,14n,14n,12n,6n,9n,13n,15n,7n,12n,8n,9n,11n,7n,7n,12n,7n,6n,15n,13n,11n,9n,7n,15n,11n,8n,6n,6n,14n,12n,13n,5n,14n,13n,13n,7n,5n,15n,5n,8n,11n,14n,14n,6n,14n,6n,9n,12n,9n,12n,5n,15n,8n,8n,5n,12n,9n,12n,5n,14n,6n,8n,13n,6n,5n,15n,13n,11n,11n],Cn=[0n,0x5a827999n,0x6ed9eba1n,0x8f1bbcdcn,0xa953fd4en],Dn=[0x50a28be6n,0x5c4dd124n,0x6d703ef3n,0x7a6d76e9n,0n];function Kn(t,n,r,e){switch(!0){case 0n===e:return t^n^r;case 1n===e:return t&n|~t&r;case 2n===e:return(t|~n)^r;case 3n===e:return t&r|n&~r;case 4n===e:return t^(n|~r);default:throw new TypeError("Unknown I value: "+String(e))}}function jn(t,n){return 0xffffffffn&(t<<n|(0xffffffffn&t)>>32n-n)}function Vn(t,n,r,e,i,a){var s=[];let o,u,c,f,h,l,d,w=t,g=n,y=r,p=e,m=i,v=t,b=n,A=r,x=e,E=i;for(let t=0;t<16;t++){const n=function(n){let r=0n;for(let t=n.length-1;0<=t;t--)r=256n*r+BigInt(n[t]);return BigInt(r)}(a.slice(4*t,4*(t+1)));s.push(n)}for(let t=0;t<80;t++)o=BigInt(t)>>4n,f=s[Number(Nn[t])],h=Cn[Number(o)],l=s[Number(Tn[t])],d=Dn[Number(o)],w=jn(w+Kn(g,y,p,o)+f+h,Rn[t])+m,u=m,m=p,p=jn(y,10n),y=g,g=w,w=u,v=jn(v+Kn(b,A,x,4n-o)+l+d,kn[t])+E,c=E,E=x,x=jn(A,10n),A=b,b=v,v=c;return[n+y+x,r+p+E,e+m+v,i+w+b,t+g+A]}const Ln=globalThis.crypto;async function qn(t,n="SHA-256",r=1,e=t=>t){let i,a=t instanceof ArrayBuffer?t:N.normalize(t).buffer;for(i=0;i<r;i++)e(a=await Ln.subtle.digest(n,a));return new Uint8Array(a)}async function Fn(t){return qn(t,"SHA-256")}function Mn(t){{var r=t=N.normalize(t);let n=[0x67452301n,0xefcdab89n,0x98badcfen,0x10325476n,0xc3d2e1f0n];for(let t=0;t<r.length>>6;t++)n=Vn(...n,r.slice(64*t,64*(t+1)));const i=[128,...new Array(119-r.length&63).fill(0)],a=Uint8Array.from([...r.slice(-64&r.length),...i,...Hn(BigInt(8*r.length),8)]);for(let t=0;t<a.length>>6;t++)n=Vn(...n,a.slice(64*t,64*(t+1)));var e=[];for(let t=0;t<n.length;t++){const i=0xffffffffn&n[t];e.push(...Hn(i,4))}return Uint8Array.from(e)}}const k={data:async function(t){return Fn(N.serialize(t)).then(t=>new Uint8Array(t))},digest:qn,ripe160:Mn,sha256:Fn,sha512:async function(t){return qn(t,"SHA-512")},hash160:async function(t){return Mn(await Fn(t))},hash256:async function(t){return qn(t,"SHA-256",2)},hmac256:async function(t,n){t=await In.hmac(t,"SHA-256");return Ln.subtle.sign("HMAC",t,N.normalize(n)).then(t=>new Uint8Array(t))},hmac512:async function(t,n){t=await In.hmac(t,"SHA-512");return Ln.subtle.sign("HMAC",t,N.normalize(n)).then(t=>new Uint8Array(t))}},Yn=[1,2,3,129,130,131];function Zn(t,n){if(n)throw new Error(t);return!1}const Wn=new TextEncoder;function Gn(t,n){let r=new T(t);return(r=r.point.hasOddY?r.negate():r).add(n)}function Xn(t,n){return R.fromX(t).add(n).rawX}async function Jn(t,n=[],r=!1){var e=g.normalize(t),t=0<n.length?await Qn(n):new Uint8Array,n=await rr(r?en.getPublicKey(e,!0).slice(1):e,t);if(r)return[g.raw(Gn(e,n)).hex,0];{const t=g.raw(Xn(e,n));return[t.slice(1).hex,t.slice(0,1).num]}}async function Qn(t){return ir(t).then(t=>g.hex(t[0]))}async function $n(t){t=await k.sha256(Wn.encode(t));return Uint8Array.of(...t,...t)}async function tr(t,n=192){var r=await $n("TapLeaf"),e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r[t];[n=192]=[n];var n=254&n,i=new Uint8Array(1),a=(i[0]=n,g.normalize(t)),s=new Uint8Array(a.length);for(let t=0;t<s.length;t++)s[t]=a[t];n=new Uint8Array(e.length+s.length+i.length);return n.set(e),n.set(i,e.length),n.set(s,e.length+i.length),k.sha256(n).then(t=>g.raw(t).hex)}async function nr(t,n){return n<t&&([t,n]=[n,t]),k.sha256(Uint8Array.of(...await $n("TapBranch"),...g.hex(t).raw,...g.hex(n).raw)).then(t=>g.raw(t).hex)}async function rr(t,n){return k.sha256(Uint8Array.of(...await $n("TapTweak"),...g.normalize(t),...g.normalize(n)))}async function er(t,n,r){var e=new f(g.normalize(n)),[,n]=(n=e.read(1).num)%2==0?[n,2]:[n-1,3],i=e.read(32),n=g.of(n,...g.normalize(t)),a=[];let s=r;for(;32<=e.size;)a.push(e.read(32).hex);if(0!==e.size)throw new Error("Invalid control block size!");for(const t of a)s=await nr(s,t);t=Xn(i,await rr(i,g.hex(s)));return g.raw(t).hex===g.raw(n).hex}async function ir(n,r=null,e=[]){const i=[],a=[];for(let t=0;t<n.length;t++){var s=n[t];if(Array.isArray(s)){const[n,a,u]=await ir(s,r);i.push(n),r=a,e.push(...u)}else i.push(s)}if(1===i.length)return[i[0],r,e];i.sort(),i.length%2!=0&&i.push(i[i.length-1]);for(let t=0;t<i.length-1;t+=2){var o=await nr(i[t],i[t+1]);a.push(o),"string"==typeof r&&(r===i[t]?(e.push(i[t+1]),r=o):r===i[t+1]&&(e.push(i[t]),r=o))}return ir(a,r,e)}const ar=[0,1,2,3,129,130,131];async function sr(t,n,r={}){var{extention:r,sigflag:e=0,extflag:i=0,key_version:a=0,separator_pos:s=4294967295}=r,{version:t,input:o=[],output:u=[],locktime:c}=t="string"==typeof t||t instanceof Uint8Array?ht(t):t;if(n>=o.length)throw new Error("Index out of bounds: "+String(n));if(!ar.includes(e))throw new Error("Invalid hash type: "+String(e));if(i<0||127<i)throw new Error("Extention flag out of range: "+String(i));var{txid:f,vout:h,sequence:l,witness:d=[]}=o[n],w=128==(128&e),d=await async function(n){if(void 0!==n&&!(n.length<2)){let t=n.at(-1);return(t="string"==typeof t?g.hex(t):t)instanceof Uint8Array&&80===t[0]?g.raw(t).prefixSize("be").digest:void 0}}(d),i=2*(i+(void 0!==r?1:0))+(void 0!==d?1:0),c=[await $n("TapSighash"),g.num(0,1),g.num(e,1),ot(t),ft(c)];if(!w){const t=o.map(t=>or(t));c.push(await async function(){var t,n,r=[];for({txid:t,vout:n}of o)r.push(p(t)),r.push(ut(n));return k.sha256(g.join(r))}(),await async function(t){var n,r=[];for({value:n}of t)r.push(m(n));return k.sha256(g.join(r))}(t),await async function(t){var n,r=[];for({scriptPubKey:n}of t)r.push(y(n));return k.sha256(g.join(r))}(t),await async function(){var t,n=[];for({sequence:t}of o)n.push(ct(t));return k.sha256(g.join(n))}())}if(((3&e)<2||3<(3&e))&&c.push(await async function(){var t,n,r=[];for({value:t,scriptPubKey:n}of u)r.push(m(t)),r.push(y(n));return k.sha256(g.join(r))}()),c.push(g.num(i,1)),w){const{value:t,scriptPubKey:r}=or(o[n]);c.push(p(f),ut(h),m(t),y(r),ct(l))}else c.push(g.num(n,4).reverse());return void 0!==d&&c.push(d),3==(3&e)&&c.push((t=u[n],await k.sha256(g.of(...m(t.value),...y(t.scriptPubKey))))),void 0!==r&&c.push(g.normalize(r),g.num(a),g.num(s,4)),k.sha256(g.join(c))}function or(t){if(void 0===t.prevout)throw new Error("Prevout data missing for input: "+String(t.txid));return t.prevout}var nn={segwit:{hash:async function(t,n,r,e,i){var a,s,o,u,c,f,h;if(Yn.includes(i))return{version:t,input:a,output:s,locktime:o}=t,{txid:u,vout:c,sequence:f}=a[n],h=128<i,(t=[ot(t)]).push(await async function(t,n){if(!0===n)return g.num(0,32);var r=[];for(const{txid:n,vout:e}of t)r.push(p(n)),r.push(ut(e));return k.hash256(g.join(r))}(a,h),await async function(t,n){if(1!==n)return g.num(0,32);var r=[];for(const{sequence:n}of t)r.push(ct(n));return k.hash256(g.join(r))}(a,i),p(u),ut(c),y(e,!0),m(r),ct(f),await async function(t,n,r){var e=[];if(1===r){for(const{value:n,scriptPubKey:r}of t)e.push(m(n)),e.push(y(r));return k.hash256(g.join(e))}if(3===r&&n<t.length){const{value:r,scriptPubKey:i}=t[n];return e.push(m(r)),e.push(y(i)),k.hash256(g.join(e))}return g.num(0,32)}(s,n,i),ft(o),g.num(i,4).reverse()),k.hash256(g.join(t));throw new Error("Invalid hash type: "+String(i))}},taproot:{hash:sr,sign:async function(t,n,r,e={}){var{sigflag:i=0}=e,n=await(0,en.schnorr.sign)(await sr(n,r,e),t);return(0===i?g.raw(n):g.of(...n,i)).hex},verify:async function(t,n,r={},e=!1){var t={...t="string"==typeof(t=t)||t instanceof Uint8Array?ht(t):t},i=t.input[n]["witness"];if(!Array.isArray(i)||i.length<1)return Zn("Invalid witness data: "+String(i),e);if(80===dt(i[i.length-1])[0]&&i.pop(),i.length<1)return Zn("Invalid witness data: "+String(i),e);var a=new f(dt(i[0])),s=a.read(64),o=dt(t.input[n].prevout?.scriptPubKey).slice(2);let u,c;if(1===a.size&&(r.sigflag=a.read(1).num,0===r.sigflag))return Zn("0x00 is not a valid appended sigflag!",e);if(1<i.length&&(c=dt(i.pop())),1<i.length&&c instanceof Uint8Array){const t=y(i.pop()),n=254&c[0];u=await tr(t,n),r.extention=u}a=await sr(t,n,r);return await(0,en.schnorr.verify)(s,a,o)?!(void 0!==c&&void 0!==u&&!await er(o,c,u))||Zn("Invalid cblock!",e):Zn("Invalid signature!",e)}}},ur={getTag:$n,getLeaf:tr,getBranch:nr,getRoot:Qn,getTweak:rr,getPubkey:async function(t,n=[]){return Jn(t,n)},getSeckey:async function(t,n=[]){return Jn(t,n,!0).then(t=>t[0])},getPath:async function t(n,r,e=[r],i=192,a=0){const s=g.normalize(n),[o,,u]=await ir(e,r),c=[g.num(i+function(t=2){if(0===t||1===t)return t;if(2===t||"02"===t)return 0;if(3===t||"03"===t)return 1;throw new Error("Invalid parity bit:"+String(t))}(a)),g.normalize(n)];1<e.length&&u.forEach(t=>c.push(g.hex(t)));var f=g.join(c);if(await er(Xn(s,await rr(s,g.hex(o))).slice(1),f,r))return f.hex;if(0===a)return t(n,r,e,i,1);throw new Error("Path checking failed! Unable to generate path.")},checkPath:er,tweakSeckey:Gn,tweakPubkey:Xn,encodeAddress:function(t,n="bc"){return 32<(t=g.normalize(t)).length&&(t=t.slice(1,33)),g.raw(t).toBech32(n,1)},decodeAddress:function(t){return g.bech32(t,1)}},cr={encode:function(t,n){var{version:t,input:r,output:e,locktime:i}=t,a=!0!==n&&function(t){for(const n of t){const t=n["witness"];if("string"==typeof t||t instanceof Uint8Array||Array.isArray(t)&&0<t.length)return!0}return!1}(r),s=[ot(t)];a&&s.push(g.hex("0001")),s.push(function(t){var n=[g.readSize(t.length)];for(const r of t){const{txid:t,vout:e,scriptSig:i,sequence:a}=r;n.push(p(t)),n.push(ut(e)),n.push(y(i)),n.push(ct(a))}return g.join(n)}(r)),s.push(function(t){var n=[g.readSize(t.length)];for(const r of t){const{address:t,value:e,scriptPubKey:i}=r;n.push(m(e)),void 0!==t?n.push(g.bech32(t).raw):n.push(y(i))}return g.join(n)}(e));for(const t of r)a&&void 0!==t?.witness&&s.push(function(t){var n=[];if(Array.isArray(t)){n.push(g.readSize(t.length));for(const r of t)n.push(y(r));return g.join(n)}return g.normalize(t)}(t.witness));return s.push(ft(i)),g.join(s).hex},decode:ht};return t.Script={encode:y,decode:function(i){{i=g.normalize(i);var a=new f(i),s=[],o=a.size;let t,n,r,e=0;for(;e<o;)switch(t=a.read(1).num,n=function(t){switch(!0){case 0===t:return"opcode";case 1<=t&&t<=75:return"varint";case 76===t:return"pushdata1";case 77===t:return"pushdata2";case 78===t:return"pushdata4";case t<=185:return"opcode";default:throw new Error("Invalid word range: "+t)}}(t),e++,n){case"varint":s.push(a.read(t).toHex()),e+=t;break;case"pushdata1":r=a.read(1).reverse().num,s.push(a.read(r).toHex()),e+=r+1;break;case"pushdata2":r=a.read(2).reverse().num,s.push(a.read(r).toHex()),e+=r+2;break;case"pushdata4":r=a.read(4).reverse().num,s.push(a.read(r).toHex()),e+=r+4;break;case"opcode":if(!function(t){switch(!0){case"number"!=typeof t:return;case 0===t:return 1;case[126,127,128,129,131,132,133,134,141,142,149,150,151,152,153].includes(t):return;case 75<t&&t<186:return 1;default:return}}(t))throw new Error("Invalid OPCODE: "+t);s.push(function(t){for(var[n,r]of Object.entries(it))if(r===t)return n;throw new Error("OPCODE not found:"+String(t))}(t));break;default:throw new Error("Word type undefined: "+t)}return s}}},t.Sig=nn,t.Tap=ur,t.Tx=cr,t}({});